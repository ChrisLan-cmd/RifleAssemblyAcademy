{% extends "layout.html" %}
{% block title %}Quiz â€“ Rifle Assembly Academy{% endblock %}
{% block head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/quiz.css') }}">
{% endblock %}

{% block content %}
  <div class="quiz-split">
    <!-- MCQ side (unchanged) -->
    <div class="split-left split-left-wrapper">
      <a href="{{ url_for('quiz_mc') }}" class="quiz-split-option">
        <div class="quiz-option">
          Multiple Choice Questions
          <div class="meter">
            <span id="split-progress-meter" style="width:0%"></span>
          </div>
        </div>
      </a>
    </div>

    <!-- Drag-and-Drop side -->
    <a href="{{ url_for('quiz_dd') }}" class="split-right quiz-split-option">
      <div class="quiz-option">
        Drag-and-Drop Challenge
        <div class="meter">
          <span id="split-dd-progress-meter" style="width:0%"></span>
        </div>
      </div>
    </a>
  </div>
{% endblock %}

{% block sidebar_back %}
  <a class="sidebar-back" href="{{ url_for('videosar') }}">Back</a>
{% endblock %}
{% block sidebar_next %}
  <a class="sidebar-next" href="{{ url_for('results') }}">Next</a>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', () => {
  // MCQ meter
  const mcq = JSON.parse(localStorage.getItem('quizMCState') || 'null');
  if (mcq && Array.isArray(mcq.answered)) {
    const done = mcq.answered.filter(a => a!==null).length;
    const pct  = (done/mcq.answered.length)*100;
    document.getElementById('split-progress-meter').style.width = pct + '%';
  }

  // DnD meter (only on submit)
  if (localStorage.getItem('quizDDSubmitted') === 'true') {
    document.getElementById('split-dd-progress-meter').style.width = '100%';
  }
});
</script>
{% endblock %}
